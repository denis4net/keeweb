language: generic
os:
- linux
sudo: required
osx_image: xcode7.3
services:
- docker
script:
- if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then npm cache clean -f; npm install && npm
  run build-ios; fi;
- if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo docker run -ti --rm --workdir /var/src
  -v $(pwd):/var/src denis4inet/build-keeweb bash -c "npm install && npm run build-android";
  fi;
deploy:
  provider: releases
  api_key:
    secure: L5Z0LgEW5ubyzxNIGkhRp8RVTUTNzzoZ+P9FlDpxVKzxmyE/JF4IiqNwIyi8MUsLSgBQMC4DkIOX+7XD8lWsDbKJysgY9KLc80fbK1KPUBAhMxKr9Fvd7IEFouLOqSDV9TbvwuHSYrW0rnyg9kZO+QSVoGJQZhY8m9D7XzVK6hYUuFb6uNRiLF236RN9+dM6jrJYj82CakhMs+Bt825mh+b2b/6q15OS7BSOcfouvZnhBmvkwlJgK9eZjAfqrALSEEbT67xWXGhWpEA83sMYbKrQaUnLw4N98BgnDf8PIigR4ukK7HvUKsZgTW2mejjj74fsslowqVk8/uGXUjnre25qt2b1IWirAdRgjejb6tZORClyZBhnFhtbqUJaVf4qhYTa+rF+RUMEI6tGix+ScN+ztNS6NqDezcJQwA7jr399lNqf8uLG9HH4hfm4lXFipHpdROhmthC2P4hZGI7SlcQb/q0YDZOW0pfPXUhdkOv/VQvsKOTa8O+FdkqtgvIk6Y5Xmf9QnhsfeDdYma3g3GUXKCnqLtRErma/YoydhoeRoLlo+N3XH4AuqD/iRloknW7U10POJaxJdigaqVW8tmHSlUgUbf/yUK8bFA3llmvzoOj7B0qCw0NzR1sHEshUmpP9SOrTJA1S80mZW+VzQUyvKtJIdbp1k8/QjZSmu7A=
  file: "./cordova/platforms/android/build/outputs/apk/android-debug.apk"
  on:
    repo: denis4net/keeweb
